#include <stdio.h>
#include<stdlib.h>
#include<string.h>
#include<stdbool.h>   // for bool type
#include<unistd.h>    // for sleep fn

#define MAX 3
typedef struct   // queue definition
{
   int front,rear;
   int num[MAX];

}queue;
queue *q;   // creating a queue pointer



// queue full check
bool isfull(queue *q)
{
   if (q->front == (q->rear+1)%MAX)
        return true;
    else
       return false;
}

// insert operation
void enqueue(queue *q, int item)
{
   if (isfull(q))
      printf("\nqueue full !!!!! \n");
   else
   {
      q->rear = (q->rear+1)%MAX;
      q->num[q->rear]=item;
   }
   if (q->front==-1)
        q->front=0;
}

// queue empty check
bool isempty(queue *q)
{

    if (q->front == -1)
       return true;
    else
       return false;
}


//delete operation

int dequeue(queue *q)
{
   int item;
   if (isempty(q))
      printf("\nqueue empty !!!!! \n");
   else
   {
   	item = q->num[q->front];
   	if (q->front == q->rear)
    {
        q->front = -1;
        q->rear = -1;
    }
    else
        q->front = (q->front+1)%MAX;
   	return item;
   }
}

// display queue
void display(queue *q)
{
	int i=q->front;
	if (i == -1)
        printf("\nEmpty Queue....\n");
    else{
       printf("\nQueue is :\n");
       while(1)
       {
          printf("%d \t", q->num[i]);
          if (i==q->rear) break;
          i=(i+1)%MAX;
       }    
}

int main()
{
   int val, option;
   // queue creation
   q=(queue *) malloc(sizeof(queue));
   // check if memory has been allocated successfully
   if(q==NULL)  // memory not allocated
   {
      printf("Memory not allocated");
      exit(0);
   }
   else
      q->front= -1;q->rear= -1;

printf("\n****Implementing a queue**** \n_____________________________________\n");
    do{
        printf("\nMenu:- \n");
        printf("\n\t 1: Enqueue \n");
        printf("\n\t 2: Dequeue \n");
        printf("\n\t 3: Display \n");
        printf("\nEnter your choice:- ");
        scanf("%d",&option);
        //calling enqueue or dequeue according to selection
        switch (option)
        {
            case 1:
                printf("\n Enter the value to enqueue: ");
                scanf("%d", &val);
                enqueue(q,val); // calling enqueue fn
                break;
            case 2:
                printf("\n Dequeued item is %d\n",dequeue(q)); // calling dequeue
                break;
            case 3:
                display(q); // calling queue display fn
                break;
            default:
                break;
        }
    } while(option==1||option==2||option==3);
free(q); //releasing the allocated memory to the pointer q

}


